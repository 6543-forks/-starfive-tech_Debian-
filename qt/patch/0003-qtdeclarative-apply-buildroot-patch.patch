From 36eb076f6362c11a1a1fd6844797818ec068203c Mon Sep 17 00:00:00 2001
From: Andy Hu <andy.hu@starfivetech.com>
Date: Tue, 27 Sep 2022 12:24:12 +0800
Subject: [PATCH 3/6] qtdeclarative: apply buildroot patch

---
 qtdeclarative/src/qml/jsruntime/qv4regexp_p.h             | 2 +-
 qtdeclarative/src/qmldebug/qqmlprofilerevent_p.h          | 1 +
 qtdeclarative/src/quick/scenegraph/coreapi/qsgtexture.cpp | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/qtdeclarative/src/qml/jsruntime/qv4regexp_p.h b/qtdeclarative/src/qml/jsruntime/qv4regexp_p.h
index 6afb10ea95..c64f3d3c38 100644
--- a/qtdeclarative/src/qml/jsruntime/qv4regexp_p.h
+++ b/qtdeclarative/src/qml/jsruntime/qv4regexp_p.h
@@ -57,7 +57,7 @@
 #include <wtf/FastAllocBase.h>
 #include <wtf/BumpPointerAllocator.h>
 
-#include <limits.h>
+#include <limits>
 
 #include <yarr/Yarr.h>
 #include <yarr/YarrInterpreter.h>
diff --git a/qtdeclarative/src/qmldebug/qqmlprofilerevent_p.h b/qtdeclarative/src/qmldebug/qqmlprofilerevent_p.h
index a7e37d1964..01b2f58f16 100644
--- a/qtdeclarative/src/qmldebug/qqmlprofilerevent_p.h
+++ b/qtdeclarative/src/qmldebug/qqmlprofilerevent_p.h
@@ -48,6 +48,7 @@
 #include <QtCore/qmetatype.h>
 
 #include <initializer_list>
+#include <limits>
 #include <type_traits>
 
 //
diff --git a/qtdeclarative/src/quick/scenegraph/coreapi/qsgtexture.cpp b/qtdeclarative/src/quick/scenegraph/coreapi/qsgtexture.cpp
index 418aaca605..5041906f00 100644
--- a/qtdeclarative/src/quick/scenegraph/coreapi/qsgtexture.cpp
+++ b/qtdeclarative/src/quick/scenegraph/coreapi/qsgtexture.cpp
@@ -46,7 +46,7 @@
 #include <private/qsgmaterialshader_p.h>
 #include <QtGui/private/qrhi_p.h>
 
-#if defined(Q_OS_LINUX) && !defined(Q_OS_ANDROID) && defined(__GLIBC__)
+#if defined(Q_OS_LINUX) && !defined(Q_OS_ANDROID) && defined(__GLIBC__) && !defined(__UCLIBC__)
 #define CAN_BACKTRACE_EXECINFO
 #endif
 
-- 
2.36.0

