From c6e5437bd353c8d240ebd33f8c8661b3f91bde33 Mon Sep 17 00:00:00 2001
From: Andy Hu <andy.hu@starfivetech.com>
Date: Fri, 13 Jan 2023 14:30:09 +0800
Subject: [PATCH] Change the /root/ to /opt path for ISP config path

---
 DDKSource/sensorapi/src/sensors/imx219mipi.c           |  2 +-
 DDKSource/sensorapi/src/sensors/ov4689mipi.c           |  2 +-
 DDKSource/sensorapi/src/sensors/sc2235dvp.c            |  8 ++++----
 .../startfive_apps/StarFiveServer/src/tuning_service.c | 10 +++++-----
 DDKSource/test_apps/stf_isp_ctrl/src/stf_isp_ctrl.c    |  6 +++---
 5 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/DDKSource/sensorapi/src/sensors/imx219mipi.c b/DDKSource/sensorapi/src/sensors/imx219mipi.c
index 7f6c0be..432174a 100644
--- a/DDKSource/sensorapi/src/sensors/imx219mipi.c
+++ b/DDKSource/sensorapi/src/sensors/imx219mipi.c
@@ -68,7 +68,7 @@
 #include "stf_common/userlog.h"
 #ifdef SIFIVE_ISP
 #define DEV_PATH                    ("/dev/ddk_sensor")
-#define EXTRA_CFG_PATH              ("/root/.ispddk/")
+#define EXTRA_CFG_PATH              ("/opt/.ispddk/")
 #endif //SIFIVE_ISP
 #define IMX219_EXPO_GAIN_METHOD     (EN_EXPO_GAIN_METHOD_1ST_EXPO_2ND_GAIN)
 
diff --git a/DDKSource/sensorapi/src/sensors/ov4689mipi.c b/DDKSource/sensorapi/src/sensors/ov4689mipi.c
index dc7922a..bfbfe2b 100644
--- a/DDKSource/sensorapi/src/sensors/ov4689mipi.c
+++ b/DDKSource/sensorapi/src/sensors/ov4689mipi.c
@@ -63,7 +63,7 @@
 #include "stf_common/userlog.h"
 #ifdef SIFIVE_ISP
 #define DEV_PATH                    ("/dev/ddk_sensor")
-#define EXTRA_CFG_PATH              ("/root/.ispddk/")
+#define EXTRA_CFG_PATH              ("/opt/.ispddk/")
 #endif //SIFIVE_ISP
 #define OV4689_EXPO_GAIN_METHOD     (EN_EXPO_GAIN_METHOD_SAME_TIME)
 
diff --git a/DDKSource/sensorapi/src/sensors/sc2235dvp.c b/DDKSource/sensorapi/src/sensors/sc2235dvp.c
index ade6131..b5721ae 100644
--- a/DDKSource/sensorapi/src/sensors/sc2235dvp.c
+++ b/DDKSource/sensorapi/src/sensors/sc2235dvp.c
@@ -58,7 +58,7 @@
 #include "stf_common/userlog.h"
 #ifdef SIFIVE_ISP
 #define DEV_PATH                    ("/dev/ddk_sensor")
-#define EXTRA_CFG_PATH              ("/root/.ispddk/")
+#define EXTRA_CFG_PATH              ("/opt/.ispddk/")
 #endif //SIFIVE_ISP
 #define SC2235_EXPO_GAIN_METHOD     (EN_EXPO_GAIN_METHOD_SAME_TIME)
 
@@ -1550,12 +1550,12 @@ STF_RESULT SC2235DVP_Create(
 
     V_LOG_INFO("<<<<<<<<<<<<\n");
 
-#ifndef USE_LINUX_SYSTEM_STARTAND_I2C
+#ifndef USE_LINUX_SYSTEM_STARTAND_I2C
 		LOG_ERROR("Create SC2235 DVP sensor must use linux standart I2C interface!! \n");
 		return STF_ERROR_DEVICE_UNAVAILABLE;
-#endif //USE_LINUX_SYSTEM_STARTAND_I2C
+#endif //USE_LINUX_SYSTEM_STARTAND_I2C
 
-#ifndef V4L2_DRIVER
+#ifndef V4L2_DRIVER
 		LOG_ERROR("Create SC2235 DVP sensor must use linux standart v4l2 drviers!! \n");
 	return STF_ERROR_DEVICE_UNAVAILABLE;
 #endif //V4L2_DRIVER
diff --git a/DDKSource/startfive_apps/StarFiveServer/src/tuning_service.c b/DDKSource/startfive_apps/StarFiveServer/src/tuning_service.c
index 0fbed32..c9acefd 100755
--- a/DDKSource/startfive_apps/StarFiveServer/src/tuning_service.c
+++ b/DDKSource/startfive_apps/StarFiveServer/src/tuning_service.c
@@ -776,7 +776,7 @@ int tuning_serv_set_setting_file(STCOMDDATA* pcomddata)
     }
 
     // Check the seting folder is exist or not?
-    sprintf(szSetting, "/root/.isp_setting");
+    sprintf(szSetting, "/opt/.isp_setting");
     bFileExist = (0 == stat(szSetting, &stStat)) ? TRUE : FALSE;
     if (FALSE == bFileExist)
     {
@@ -792,7 +792,7 @@ int tuning_serv_set_setting_file(STCOMDDATA* pcomddata)
     }
 
     // Remove backup file.
-    sprintf(szTemp, "/root/.isp_setting/IspSetting_%dx%d.bak",
+    sprintf(szTemp, "/opt/.isp_setting/IspSetting_%dx%d.bak",
         s32Width, s32Height);
     bFileExist = (0 == stat(szTemp, &stStat)) ? TRUE : FALSE;
     if (TRUE == bFileExist)
@@ -802,7 +802,7 @@ int tuning_serv_set_setting_file(STCOMDDATA* pcomddata)
     }
 
     // Rename setting file as backup file.
-    sprintf(szSetting, "/root/.isp_setting/IspSetting_%dx%d.ybn",
+    sprintf(szSetting, "/opt/.isp_setting/IspSetting_%dx%d.ybn",
         s32Width, s32Height);
     bFileExist = (0 == stat(szSetting, &stStat)) ? TRUE : FALSE;
     if (TRUE == bFileExist)
@@ -843,7 +843,7 @@ int tuning_serv_set_delete_setting_file(STCOMDDATA* pcomddata)
     }
 
     // Remove backup file.
-    sprintf(szSetting, "/root/.isp_setting/IspSetting_%dx%d.bak",
+    sprintf(szSetting, "/opt/.isp_setting/IspSetting_%dx%d.bak",
         s32Width, s32Height);
     bFileExist = (0 == stat(szSetting, &stStat)) ? TRUE : FALSE;
     if (TRUE == bFileExist)
@@ -853,7 +853,7 @@ int tuning_serv_set_delete_setting_file(STCOMDDATA* pcomddata)
     }
 
     // Remove setting file.
-    sprintf(szSetting, "/root/.isp_setting/IspSetting_%dx%d.ybn",
+    sprintf(szSetting, "/opt/.isp_setting/IspSetting_%dx%d.ybn",
         s32Width, s32Height);
     bFileExist = (0 == stat(szSetting, &stStat)) ? TRUE : FALSE;
     if (TRUE == bFileExist)
diff --git a/DDKSource/test_apps/stf_isp_ctrl/src/stf_isp_ctrl.c b/DDKSource/test_apps/stf_isp_ctrl/src/stf_isp_ctrl.c
index 3522def..0a4d269 100755
--- a/DDKSource/test_apps/stf_isp_ctrl/src/stf_isp_ctrl.c
+++ b/DDKSource/test_apps/stf_isp_ctrl/src/stf_isp_ctrl.c
@@ -1932,14 +1932,14 @@ static STF_INT IspCtrl(
     // ISP load binary parameters.
     //=========================================================================
     bFileExist = STF_FALSE;
-    sprintf(szIspBinParamFilename, "/root/.isp_setting/IspSetting_%dx%d.ybn",
+    sprintf(szIspBinParamFilename, "/opt/.isp_setting/IspSetting_%dx%d.ybn",
         stPipeline.stIspCtx.stImgSize.u16Cx,
         stPipeline.stIspCtx.stImgSize.u16Cy
         );
     bFileExist = (0 == stat(szIspBinParamFilename, &stStat))
         ? STF_TRUE : STF_FALSE;
     if (STF_FALSE == bFileExist) {
-        sprintf(szIspBinParamFilename, "/root/ISP/IspSetting_%s_%dx%d.ybn",
+        sprintf(szIspBinParamFilename, "/opt/ISP/IspSetting_%s_%dx%d.ybn",
             szSensorName,
             stPipeline.stIspCtx.stImgSize.u16Cx,
             stPipeline.stIspCtx.stImgSize.u16Cy
@@ -1956,7 +1956,7 @@ static STF_INT IspCtrl(
             CAPTURE_HEIGHT
             );
 
-        sprintf(szIspBinParamFilename, "/root/ISP/IspSetting_%s_%dx%d.ybn",
+        sprintf(szIspBinParamFilename, "/opt/ISP/IspSetting_%s_%dx%d.ybn",
             szSensorName,
             CAPTURE_WIDTH,
             CAPTURE_HEIGHT
-- 
2.36.0

